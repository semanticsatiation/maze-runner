<app-tile-keys></app-tile-keys>

<div class="maze-options">

    <div class="sub-maze">
        <a class="link-light" href="#" (click)="clearMaze()">
            clear maze
        </a>
    
        <a class="link-light" href="#" (click)="clearPath()">
            clear path
        </a>
        
        <button type="button" class="btn btn-success" [disabled]="isSolving" (click)="solve()">
            run maze
        </button>


        <div class="flex-column-center">
            <label for="speed">Speed</label>

            <select [disabled]="isSolving" name="speed" id="speed" [value]="speed" (change)="adjustSpeed($event)">
                <option *ngFor="let speedItem of speeds; let i = index;" [selected]="speedItem[1] === speed.toString()" [value]="speeds[i][1]">{{speedItem[0]}}</option>
            </select>
        </div>

        <div class="flex-column-center">
            <label for="zoom">Zoom</label>

            <select name="zoom" id="zoom" [value]="zoom" (change)="adjustZoom($event)">
                <option *ngFor="let zoomItem of zooms; let i = index;" [selected]="zoomItem === zoom" [value]="zooms[i]">{{zoomItem}}%</option>
            </select>
        </div>
    </div>

    <div class="buttons-container">
        <div class="button-container flex-column-center">
            <label for="height">Height</label>

            <div>
                <span>
                    <button [disabled]="isSolving" class="btn btn-danger btn-number" (click)="setDimensions({event: undefined, number: height - 1}, 'height')" type="button">
                        -
                    </button>
                </span>
                <input id="height" name="height" class="form-control" (change)="setDimensions({event: $event, number: undefined}, 'height')" [disabled]="isSolving" type="text" [value]="height">
                <span>
                    <button [disabled]="isSolving" class="btn btn-success btn-number" (click)="setDimensions({event: undefined, number: height + 1}, 'height')" type="button">
                        +
                    </button>
                </span>
            </div>
        </div>

        <div class="button-container flex-column-center">
            <label for="width">Width</label>

            <div>
                <span>
                    <button [disabled]="isSolving" class="btn btn-danger btn-number" (click)="setDimensions({event: undefined, number: width - 1}, 'width')" type="button">
                        -
                    </button>
                </span>
                <input id="width" name="width" class="form-control" (change)="setDimensions({event: $event, number: undefined}, 'width')" [disabled]="isSolving" type="text" [value]="width">
                <span>
                    <button [disabled]="isSolving" class="btn btn-success btn-number" (click)="setDimensions({event: undefined, number: width + 1}, 'width')" type="button">
                        +
                    </button>
                </span>
            </div>
        </div>
    </div>
</div>

<div class="maze-container">
    <ul class="maze" (contextmenu)="$event.preventDefault()">
        <li class="row" *ngFor="let square of squares; let ri = index;">
            <div
                [ngStyle]="{height: calcZoom(), width: calcZoom()}"
                *ngFor="let block of square; let ci = index;"
                (mouseover)="toggleTile([ri, ci])" 
                (mousedown)="mouseIsDown = true"
                (mouseup)="mouseIsDown = false"
                (dblclick)="placeGoal([ri, ci], 'end')"
                (click)="clickToggle([ri, ci])"
                (contextmenu)="placeGoal([ri, ci], 'start')"
                [ngClass]="[
                    true && 'square', 
                    isPositionPresent([ri, ci]) ? 'wall' : '', 
                    calcInd(start) === calcInd([ri, ci]) ? 'start-tile' : '', 
                    calcInd(end) === calcInd([ri, ci]) ? 'end-tile' : '',
                    !isPresent(finalPath, [ri, ci]) && calcInd(start) !== calcInd([ri, ci]) && isPresent(seen, [ri, ci]) ? 'seen-tile' : '',
                    isPresent(finalPath, [ri, ci]) ? 'final-tile' : ''
                ]"
            >
            </div>
        </li>
    </ul>
</div>